<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/hosts/show.css" />
<%- include('../partials/nav') %>

<main>
  <h1><%= title %></h1>
<section>
  <div><%= host.name %></div>
  <% if (host.equals(hostProfile?._id)) { %>
    <a href="/hosts/<%= host._id %>/edit">
      <button>Edit Profile</button>
    </a>
  <% } %>
  <img id="avatar" src="<%= host.avatar %>">
  <div><%= `${host.age} years old.` %></div>
  <div><%= host.email %></div>
  <div><%- host.eligible ? "Eligible to drive!" : "Not eligible to drive until 21 years of age." %></div>

  <h2>Cars</h2>
  <% if (host.cars.length) { %>
    <% host.cars.forEach(car => { %>
      <ul>
        <%= car.make %>
        <%= car.model %>
        <%= car.color %>
        <%= `$${car.price}` %>
        <% if (car.host.equals(hostProfile?._id)) { %>
          <form 
            action="/hosts/<%= host._id %>/cars/<%= car._id %>?_method=DELETE"
            method="POST"
          >
            <button class="btn" type="submit">Delete this car</button>
          </form>
        <% } %>
        <a href="/hosts/<%= host._id %>/cars/<%= car._id %>">view car</a>
      </ul>
    <% }) %>
  <% } else { %>
    <h3>No cars have been added to your profile.</h3>
  <% } %>

  <p>Tell me about your car!</p>
  <form 
    id="new-form" 
    action="/hosts/<%= host._id %>/cars" 
    method="POST">
    <input placeholder="Make" type="text" name="make" id="make-input">
    <input placeholder="Model" type="text" name="model" id="model-input">
    <input placeholder="Color" type="text" name="color" id="color-input">
    <input placeholder="Daily Rate" type="number" name="price" id="price-input">
      <button id="add-car" type="submit">Add Car</button>
  </form>
</section>
</main>

<%- include("../partials/footer") %>